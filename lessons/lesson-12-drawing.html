<!DOCTYPE html><html lang="ar" dir="rtl"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… - Ù…Ø¯Ø±Ø³Ø© Ø£ÙƒØ¯Ø§Ù„</title>    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">    <style>        * {            margin: 0;            padding: 0;            box-sizing: border-box;        }        body {            font-family: 'Tajawal', sans-serif;            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);            min-height: 100vh;            color: white;            padding: 20px;        }        .lesson-container {            max-width: 1000px;            margin: 0 auto;        }        .lesson-header {            background: linear-gradient(135deg, #e91e63, #c2185b);            padding: 30px;            border-radius: 20px;            text-align: center;            margin-bottom: 30px;        }        .back-btn {            display: inline-flex;            padding: 12px 25px;            background: rgba(255, 255, 255, 0.2);            color: white;            text-decoration: none;            border-radius: 10px;            margin-bottom: 20px;        }        .lesson-section {            background: rgba(255, 255, 255, 0.1);            border-radius: 20px;            padding: 25px;            margin-bottom: 25px;        }        .lesson-section h2 {            color: #e91e63;            font-size: 1.6rem;            margin-bottom: 15px;        }        .toolbar {            display: flex;            flex-wrap: wrap;            gap: 10px;            justify-content: center;            margin-bottom: 20px;            padding: 15px;            background: rgba(0, 0, 0, 0.3);            border-radius: 15px;        }        .tool-group {            display: flex;            gap: 5px;            padding: 8px;            background: rgba(255, 255, 255, 0.05);            border-radius: 10px;            align-items: center;        }        .tool-group-label {            font-size: 0.8rem;            opacity: 0.7;            margin-left: 5px;        }        .tool-btn {            width: 45px;            height: 45px;            border-radius: 10px;            border: 2px solid transparent;            cursor: pointer;            transition: all 0.2s;            background: rgba(255, 255, 255, 0.1);            color: white;            font-size: 1.3rem;            display: flex;            align-items: center;            justify-content: center;        }        .tool-btn:hover {            background: rgba(255, 255, 255, 0.2);        }        .tool-btn.active {            border-color: #e91e63;            background: rgba(233, 30, 99, 0.3);        }        .color-btn {            width: 35px;            height: 35px;            border-radius: 50%;            border: 3px solid transparent;            cursor: pointer;            transition: all 0.2s;        }        .color-btn:hover,        .color-btn.active {            border-color: white;            transform: scale(1.15);        }        .size-slider {            width: 80px;            height: 8px;            -webkit-appearance: none;            background: rgba(255, 255, 255, 0.2);            border-radius: 4px;        }        .size-slider::-webkit-slider-thumb {            -webkit-appearance: none;            width: 20px;            height: 20px;            background: #e91e63;            border-radius: 50%;            cursor: pointer;        }        .canvas-wrapper {            position: relative;            display: flex;            justify-content: center;        }        #drawingCanvas {            background: white;            border-radius: 15px;            cursor: crosshair;            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);        }        .controls {            display: flex;            flex-wrap: wrap;            gap: 10px;            justify-content: center;            margin-top: 20px;        }        .control-btn {            padding: 12px 25px;            background: linear-gradient(135deg, #667eea, #764ba2);            color: white;            border: none;            border-radius: 12px;            font-size: 1rem;            cursor: pointer;            font-family: inherit;            transition: all 0.2s;        }        .control-btn:hover {            transform: translateY(-2px);            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);        }        .control-btn.danger {            background: linear-gradient(135deg, #ff4444, #cc0000);        }        .control-btn.success {            background: linear-gradient(135deg, #00c853, #009624);        }        .color-picker-container {            display: flex;            align-items: center;            gap: 10px;        }        .custom-color {            width: 35px;            height: 35px;            border: none;            border-radius: 50%;            cursor: pointer;        }        .drawing-info {            display: flex;            justify-content: center;            gap: 30px;            margin-top: 15px;            font-size: 0.9rem;            opacity: 0.8;        }        .shapes-palette {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));            gap: 10px;            margin-top: 15px;        }        .shape-item {            background: rgba(233, 30, 99, 0.15);            padding: 15px;            border-radius: 12px;            text-align: center;            cursor: pointer;            transition: all 0.2s;            border: 2px solid transparent;        }        .shape-item:hover {            background: rgba(233, 30, 99, 0.3);        }        .shape-item.active {            border-color: #e91e63;        }        .shape-item .icon {            font-size: 2rem;        }        .shape-item .name {            font-size: 0.8rem;            margin-top: 5px;        }        .tips-box {            background: rgba(255, 215, 0, 0.1);            border: 2px solid rgba(255, 215, 0, 0.3);            border-radius: 15px;            padding: 20px;            margin-top: 20px;        }        .tips-box h4 {            color: #ffd700;            margin-bottom: 10px;        }        .tips-box ul {            padding-right: 25px;            line-height: 2;        }        .complete-section {            text-align: center;            padding: 40px;        }        .points-earned {            font-size: 3rem;            color: #00ff88;            font-weight: 800;            margin: 20px 0;        }        .action-btn {            display: inline-block;            padding: 15px 40px;            background: linear-gradient(135deg, #e91e63, #c2185b);            color: white;            text-decoration: none;            border-radius: 15px;            font-size: 1.1rem;            font-weight: 700;            margin: 10px;        }    </style></head><body>    <div class="lesson-container">        <a href="../index.html#library" class="back-btn">â†’ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø©</a>        <div class="lesson-header">            <div style="font-size: 4rem; margin-bottom: 15px;">ğŸ¨</div>            <h1>Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h1>            <p>Ø£Ø¯ÙˆØ§Øª Ø±Ø³Ù… Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„ÙÙ†Ø§Ù†ÙŠÙ† Ø§Ù„ØµØºØ§Ø±</p>        </div>        <div class="lesson-section">            <h2>ğŸ–Œï¸ Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø±Ø³Ù…</h2>            <div class="toolbar">                <div class="tool-group">                    <span class="tool-group-label">Ø£Ø¯ÙˆØ§Øª:</span>                    <button class="tool-btn active" onclick="setTool('brush', this)" title="ÙØ±Ø´Ø§Ø©">ğŸ–Œï¸</button>                    <button class="tool-btn" onclick="setTool('pencil', this)" title="Ù‚Ù„Ù… Ø±ØµØ§Øµ">âœï¸</button>                    <button class="tool-btn" onclick="setTool('line', this)" title="Ø®Ø· Ù…Ø³ØªÙ‚ÙŠÙ…">ğŸ“</button>                    <button class="tool-btn" onclick="setTool('eraser', this)" title="Ù…Ù…Ø­Ø§Ø©">ğŸ§¹</button>                    <button class="tool-btn" onclick="setTool('fill', this)" title="ØªØ¹Ø¨Ø¦Ø©">ğŸª£</button>                </div>                <div class="tool-group">                    <span class="tool-group-label">Ø£Ø´ÙƒØ§Ù„:</span>                    <button class="tool-btn" onclick="setTool('rectangle', this)" title="Ù…Ø³ØªØ·ÙŠÙ„">â–¢</button>                    <button class="tool-btn" onclick="setTool('circle', this)" title="Ø¯Ø§Ø¦Ø±Ø©">â—‹</button>                    <button class="tool-btn" onclick="setTool('triangle', this)" title="Ù…Ø«Ù„Ø«">â–³</button>                    <button class="tool-btn" onclick="setTool('star', this)" title="Ù†Ø¬Ù…Ø©">â˜†</button>                    <button class="tool-btn" onclick="setTool('heart', this)" title="Ù‚Ù„Ø¨">â™¡</button>                </div>                <div class="tool-group">                    <span class="tool-group-label">Ø£Ù„ÙˆØ§Ù†:</span>                    <button class="color-btn active" style="background: #000000;"                        onclick="setColor('#000000', this)"></button>                    <button class="color-btn" style="background: #ff0000;" onclick="setColor('#ff0000', this)"></button>                    <button class="color-btn" style="background: #ff9800;" onclick="setColor('#ff9800', this)"></button>                    <button class="color-btn" style="background: #ffeb3b;" onclick="setColor('#ffeb3b', this)"></button>                    <button class="color-btn" style="background: #4caf50;" onclick="setColor('#4caf50', this)"></button>                    <button class="color-btn" style="background: #2196f3;" onclick="setColor('#2196f3', this)"></button>                    <button class="color-btn" style="background: #9c27b0;" onclick="setColor('#9c27b0', this)"></button>                    <button class="color-btn" style="background: #e91e63;" onclick="setColor('#e91e63', this)"></button>                    <input type="color" class="custom-color" id="customColor" value="#ffffff"                        onchange="setColor(this.value, null)" title="Ù„ÙˆÙ† Ù…Ø®ØµØµ">                </div>                <div class="tool-group">                    <span class="tool-group-label">Ø­Ø¬Ù…:</span>                    <input type="range" class="size-slider" min="1" max="50" value="5" id="brushSize"                        oninput="updateSize()">                    <span id="sizeValue" style="min-width: 30px;">5</span>                </div>            </div>            <div class="toolbar" style="margin-bottom: 15px;">                <div class="tool-group">                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">                        <input type="checkbox" id="fillShape" style="width: 18px; height: 18px;">                        <span>ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø´ÙƒÙ„</span>                    </label>                </div>                <div class="tool-group">                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">                        <input type="checkbox" id="showGrid" onchange="toggleGrid()" style="width: 18px; height: 18px;">                        <span>Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ©</span>                    </label>                </div>                <div class="tool-group">                    <span class="tool-group-label">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·:</span>                    <select id="lineStyle"                        style="padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: none;">                        <option value="solid">Ù…ØªØµÙ„</option>                        <option value="dashed">Ù…ØªÙ‚Ø·Ø¹</option>                        <option value="dotted">Ù…Ù†Ù‚Ø·</option>                    </select>                </div>            </div>            <div class="canvas-wrapper">                <canvas id="drawingCanvas" width="800" height="500"></canvas>            </div>            <div class="drawing-info">                <span>Ø§Ù„Ø£Ø¯Ø§Ø©: <strong id="currentTool">ÙØ±Ø´Ø§Ø©</strong></span>                <span>Ø§Ù„Ù„ÙˆÙ†: <span id="currentColorDisplay"                        style="display: inline-block; width: 20px; height: 20px; background: #000; border-radius: 50%; vertical-align: middle;"></span></span>                <span>Ø§Ù„Ù…ÙˆÙ‚Ø¹: <strong id="mousePos">0, 0</strong></span>            </div>            <div class="controls">                <button class="control-btn" onclick="undo()">â†¶ ØªØ±Ø§Ø¬Ø¹</button>                <button class="control-btn" onclick="redo()">â†· Ø¥Ø¹Ø§Ø¯Ø©</button>                <button class="control-btn danger" onclick="clearCanvas()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>                <button class="control-btn success" onclick="downloadDrawing()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø±Ø³Ù…</button>            </div>        </div>        <div class="lesson-section">            <h2>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø±Ø³Ù…</h2>            <div class="tips-box">                <h4>ğŸ¯ ÙƒÙŠÙ ØªØ±Ø³Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„:</h4>                <ul>                    <li>Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø¯ÙˆØ§Ø¦Ø±ØŒ Ù…Ø±Ø¨Ø¹Ø§ØªØŒ Ù…Ø«Ù„Ø«Ø§Øª)</li>                    <li>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ù…ØªÙ†Ø§Ø³Ù‚</li>                    <li>Ø¬Ø±Ø¨ Ø£Ù„ÙˆØ§Ù†Ø§Ù‹ Ù…ØªÙ†Ø§Ø³Ù‚Ø© Ù…Ø¹Ø§Ù‹</li>                    <li>Ù„Ø§ ØªØ®Ù Ù…Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø© - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¯Ø§Ø¦Ù…Ø§Ù‹!</li>                    <li>Ø§Ø±Ø³Ù… Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±ÙŠØ¶Ø© Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø£Ø¶Ù Ø§Ù„ØªÙØ§ØµÙŠÙ„</li>                </ul>            </div>        </div>        <div class="lesson-section">            <h2>ğŸ† ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø±Ø³Ù…</h2>            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">                <div                    style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 215, 0, 0.3);">                    <div style="font-size: 3rem;">ğŸ </div>                    <h4 style="color: #ffd700; margin: 10px 0;">ØªØ­Ø¯ÙŠ 1</h4>                    <p>Ø§Ø±Ø³Ù… Ø¨ÙŠØªØ§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹ ÙˆØ§Ù„Ù…Ø«Ù„Ø«</p>                </div>                <div                    style="background: rgba(0, 255, 136, 0.1); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(0, 255, 136, 0.3);">                    <div style="font-size: 3rem;">ğŸ˜Š</div>                    <h4 style="color: #00ff88; margin: 10px 0;">ØªØ­Ø¯ÙŠ 2</h4>                    <p>Ø§Ø±Ø³Ù… ÙˆØ¬Ù‡Ø§Ù‹ Ù…Ø¨ØªØ³Ù…Ø§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯ÙˆØ§Ø¦Ø±</p>                </div>                <div                    style="background: rgba(233, 30, 99, 0.1); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(233, 30, 99, 0.3);">                    <div style="font-size: 3rem;">ğŸŒ¸</div>                    <h4 style="color: #e91e63; margin: 10px 0;">ØªØ­Ø¯ÙŠ 3</h4>                    <p>Ø§Ø±Ø³Ù… Ø²Ù‡Ø±Ø© Ù…Ù„ÙˆÙ†Ø©</p>                </div>            </div>        </div>        <div class="lesson-section complete-section">            <div style="font-size: 5rem;">ğŸ–¼ï¸</div>            <h2 style="color: #e91e63;">ÙÙ†Ø§Ù† Ù…Ø¨Ø¯Ø¹!</h2>            <p>Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø±Ø³Ù…</p>            <div class="points-earned">+50 Ù†Ù‚Ø·Ø©</div>            <a href="../index.html#library" class="action-btn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø© â†’</a>        </div>    </div>    <script>        const canvas = document.getElementById('drawingCanvas');        const ctx = canvas.getContext('2d');        let currentTool = 'brush';        let currentColor = '#000000';        let brushSize = 5;        let isDrawing = false;        let startX, startY;        let lastX, lastY;        let history = [];        let historyIndex = -1;        ctx.fillStyle = 'white';        ctx.fillRect(0, 0, canvas.width, canvas.height);        ctx.lineCap = 'round';        ctx.lineJoin = 'round';        saveState();        const toolNames = {            brush: 'ÙØ±Ø´Ø§Ø©', pencil: 'Ù‚Ù„Ù…', line: 'Ø®Ø·', eraser: 'Ù…Ù…Ø­Ø§Ø©', fill: 'ØªØ¹Ø¨Ø¦Ø©',            rectangle: 'Ù…Ø³ØªØ·ÙŠÙ„', circle: 'Ø¯Ø§Ø¦Ø±Ø©', triangle: 'Ù…Ø«Ù„Ø«', star: 'Ù†Ø¬Ù…Ø©', heart: 'Ù‚Ù„Ø¨'        };        function setTool(tool, btn) {            currentTool = tool;            document.getElementById('currentTool').textContent = toolNames[tool];            document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));            if (btn) btn.classList.add('active');        }        function setColor(color, btn) {            currentColor = color;            document.getElementById('currentColorDisplay').style.background = color;            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));            if (btn) btn.classList.add('active');        }        function updateSize() {            brushSize = document.getElementById('brushSize').value;            document.getElementById('sizeValue').textContent = brushSize;        }        canvas.addEventListener('mousedown', startDrawing);        canvas.addEventListener('mousemove', draw);        canvas.addEventListener('mouseup', stopDrawing);        canvas.addEventListener('mouseout', stopDrawing);        canvas.addEventListener('touchstart', handleTouchStart, { passive: false });        canvas.addEventListener('touchmove', handleTouchMove, { passive: false });        canvas.addEventListener('touchend', stopDrawing);        function getMousePos(e) {            const rect = canvas.getBoundingClientRect();            return {                x: e.clientX - rect.left,                y: e.clientY - rect.top            };        }        function startDrawing(e) {            isDrawing = true;            const pos = getMousePos(e);            startX = pos.x;            startY = pos.y;            lastX = pos.x;            lastY = pos.y;            if (currentTool === 'brush' || currentTool === 'pencil' || currentTool === 'eraser') {                ctx.beginPath();                ctx.moveTo(pos.x, pos.y);            }        }        function draw(e) {            const pos = getMousePos(e);            document.getElementById('mousePos').textContent = `${Math.round(pos.x)}, ${Math.round(pos.y)}`;            if (!isDrawing) return;            const lineStyle = document.getElementById('lineStyle').value;            ctx.setLineDash(lineStyle === 'dashed' ? [10, 5] : lineStyle === 'dotted' ? [2, 5] : []);            if (currentTool === 'brush' || currentTool === 'pencil') {                ctx.lineWidth = currentTool === 'pencil' ? Math.max(1, brushSize / 3) : brushSize;                ctx.strokeStyle = currentColor;                ctx.lineTo(pos.x, pos.y);                ctx.stroke();            } else if (currentTool === 'eraser') {                ctx.lineWidth = brushSize * 2;                ctx.strokeStyle = 'white';                ctx.lineTo(pos.x, pos.y);                ctx.stroke();            } else if (['line', 'rectangle', 'circle', 'triangle', 'star', 'heart'].includes(currentTool)) {                if (historyIndex >= 0) {                    ctx.putImageData(history[historyIndex], 0, 0);                }                drawShape(startX, startY, pos.x, pos.y);            }            lastX = pos.x;            lastY = pos.y;        }        function stopDrawing() {            if (isDrawing) {                isDrawing = false;                ctx.beginPath();                saveState();            }        }        function drawShape(x1, y1, x2, y2) {            ctx.lineWidth = brushSize;            ctx.strokeStyle = currentColor;            ctx.fillStyle = currentColor;            const fill = document.getElementById('fillShape').checked;            ctx.beginPath();            switch (currentTool) {                case 'line':                    ctx.moveTo(x1, y1);                    ctx.lineTo(x2, y2);                    ctx.stroke();                    break;                case 'rectangle':                    if (fill) {                        ctx.fillRect(x1, y1, x2 - x1, y2 - y1);                    } else {                        ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);                    }                    break;                case 'circle':                    const radius = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));                    ctx.arc(x1, y1, radius, 0, Math.PI * 2);                    fill ? ctx.fill() : ctx.stroke();                    break;                case 'triangle':                    ctx.moveTo(x1 + (x2 - x1) / 2, y1);                    ctx.lineTo(x2, y2);                    ctx.lineTo(x1, y2);                    ctx.closePath();                    fill ? ctx.fill() : ctx.stroke();                    break;                case 'star':                    drawStar((x1 + x2) / 2, (y1 + y2) / 2, 5, Math.abs(x2 - x1) / 2, Math.abs(x2 - x1) / 4, fill);                    break;                case 'heart':                    drawHeart((x1 + x2) / 2, (y1 + y2) / 2, Math.abs(x2 - x1) / 2, fill);                    break;            }        }        function drawStar(cx, cy, spikes, outerRadius, innerRadius, fill) {            let rot = Math.PI / 2 * 3;            let step = Math.PI / spikes;            ctx.beginPath();            ctx.moveTo(cx, cy - outerRadius);            for (let i = 0; i < spikes; i++) {                let x = cx + Math.cos(rot) * outerRadius;                let y = cy + Math.sin(rot) * outerRadius;                ctx.lineTo(x, y);                rot += step;                x = cx + Math.cos(rot) * innerRadius;                y = cy + Math.sin(rot) * innerRadius;                ctx.lineTo(x, y);                rot += step;            }            ctx.lineTo(cx, cy - outerRadius);            ctx.closePath();            fill ? ctx.fill() : ctx.stroke();        }        function drawHeart(cx, cy, size, fill) {            ctx.beginPath();            ctx.moveTo(cx, cy + size / 4);            ctx.bezierCurveTo(cx, cy - size / 2, cx - size, cy - size / 2, cx - size, cy);            ctx.bezierCurveTo(cx - size, cy + size / 2, cx, cy + size, cx, cy + size);            ctx.bezierCurveTo(cx, cy + size, cx + size, cy + size / 2, cx + size, cy);            ctx.bezierCurveTo(cx + size, cy - size / 2, cx, cy - size / 2, cx, cy + size / 4);            fill ? ctx.fill() : ctx.stroke();        }        function handleTouchStart(e) {            e.preventDefault();            const touch = e.touches[0];            const rect = canvas.getBoundingClientRect();            const mouseEvent = new MouseEvent('mousedown', {                clientX: touch.clientX,                clientY: touch.clientY            });            canvas.dispatchEvent(mouseEvent);        }        function handleTouchMove(e) {            e.preventDefault();            const touch = e.touches[0];            const mouseEvent = new MouseEvent('mousemove', {                clientX: touch.clientX,                clientY: touch.clientY            });            canvas.dispatchEvent(mouseEvent);        }        function saveState() {            historyIndex++;            history = history.slice(0, historyIndex);            history.push(ctx.getImageData(0, 0, canvas.width, canvas.height));            if (history.length > 50) {                history.shift();                historyIndex--;            }        }        function undo() {            if (historyIndex > 0) {                historyIndex--;                ctx.putImageData(history[historyIndex], 0, 0);            }        }        function redo() {            if (historyIndex < history.length - 1) {                historyIndex++;                ctx.putImageData(history[historyIndex], 0, 0);            }        }        function clearCanvas() {            ctx.fillStyle = 'white';            ctx.fillRect(0, 0, canvas.width, canvas.height);            saveState();        }        function toggleGrid() {            const showGrid = document.getElementById('showGrid').checked;            if (showGrid) {                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);                ctx.strokeStyle = 'rgba(200, 200, 200, 0.5)';                ctx.lineWidth = 0.5;                ctx.setLineDash([]);                for (let x = 0; x <= canvas.width; x += 50) {                    ctx.beginPath();                    ctx.moveTo(x, 0);                    ctx.lineTo(x, canvas.height);                    ctx.stroke();                }                for (let y = 0; y <= canvas.height; y += 50) {                    ctx.beginPath();                    ctx.moveTo(0, y);                    ctx.lineTo(canvas.width, y);                    ctx.stroke();                }            } else {                if (historyIndex >= 0) {                    ctx.putImageData(history[historyIndex], 0, 0);                }            }        }        function downloadDrawing() {            const link = document.createElement('a');            link.download = 'my-drawing.png';            link.href = canvas.toDataURL();            link.click();        }    </script></body></html>