const IMAGES = [    { src: 'assets/img1.png', title: 'Ø§Ù„Ø£Ø³Ø¯ Ù…Ù„Ùƒ Ø§Ù„ØºØ§Ø¨Ø©' },    { src: 'assets/img2.png', title: 'Ø·Ø¨ÙŠØ¹Ø© Ø®Ù„Ø§Ø¨Ø©' },    { src: 'assets/img3.png', title: 'Ø±Ø­Ù„Ø© Ø§Ù„ÙØ¶Ø§Ø¡' },    { src: 'assets/img4.png', title: 'Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©' },    { src: 'assets/img5.png', title: 'Ø¹Ø§Ù„Ù… Ø§Ù„Ø¨Ø­Ø§Ø±' }];const GRID_SIZE = 3; let tiles = []; let currentImage = null;let selectedTileIndex = null;let isGameActive = false;let timerInterval = null;let timeLeft = 60;const audioCtx = new (window.AudioContext || window.webkitAudioContext)();function init() {    renderImageSelector();}function renderImageSelector() {    const grid = document.getElementById('image-grid');    grid.innerHTML = IMAGES.map((img, index) => `        <div class="img-option" onclick="selectImage(${index})">            <img src="${img.src}" loading="lazy">            <div class="img-caption">${img.title}</div>        </div>    `).join('');}function selectImage(index) {    currentImage = IMAGES[index];    document.getElementById('selector-modal').classList.remove('active');        const hintImg = document.getElementById('reference-img');    hintImg.src = currentImage.src;    hintImg.classList.remove('hidden-hint');    startGame();}function showImageSelector() {    stopTimer();    document.getElementById('result-modal').classList.remove('active');    document.getElementById('selector-modal').classList.add('active');}function goHome() {    window.location.href = '../../index.html';}function startGame() {    document.getElementById('result-modal').classList.remove('active');    const hintImg = document.getElementById('reference-img');    hintImg.classList.remove('hidden-hint');    isGameActive = true;    selectedTileIndex = null;    generateTiles();    startTimer();        setTimeout(() => {        if (isGameActive) {            hintImg.classList.add('hidden-hint');        }    }, 7000);}function restartGame() {    if (!currentImage) return;     startGame();}function generateTiles() {    const board = document.getElementById('puzzle-board');    board.innerHTML = '';    tiles = [];        for (let i = 0; i < GRID_SIZE * GRID_SIZE; i++) {        tiles.push({            currentPos: i,            correctPos: i        });    }        shuffleTiles();        renderBoard();}function shuffleTiles() {                            let contents = Array.from({ length: GRID_SIZE * GRID_SIZE }, (_, i) => i);            for (let i = contents.length - 1; i > 0; i--) {        const j = Math.floor(Math.random() * (i + 1));        [contents[i], contents[j]] = [contents[j], contents[i]];    }            tiles = contents.map((contentVal, index) => ({        currentPos: index,              correctPos: contentVal      }));}function renderBoard() {    const board = document.getElementById('puzzle-board');    board.innerHTML = '';    const boardSize = board.clientWidth;     const tileSize = boardSize / GRID_SIZE;    tiles.forEach((tile, index) => {        const el = document.createElement('div');        el.className = 'tile';                const hintsRow = Math.floor(tile.correctPos / GRID_SIZE);        const hintsCol = tile.correctPos % GRID_SIZE;                                const xPct = (hintsCol / (GRID_SIZE - 1)) * 100;        const yPct = (hintsRow / (GRID_SIZE - 1)) * 100;        el.style.backgroundImage = `url(${currentImage.src})`;        el.style.backgroundPosition = `${xPct}% ${yPct}%`;        if (index === selectedTileIndex) el.classList.add('selected');        el.onclick = () => handleTileClick(index);        board.appendChild(el);    });}function handleTileClick(index) {    if (!isGameActive) return;    if (selectedTileIndex === null) {                selectedTileIndex = index;        playSound('click');        renderBoard();     } else {        if (selectedTileIndex === index) {                        selectedTileIndex = null;            renderBoard();        } else {                        swapTiles(selectedTileIndex, index);            selectedTileIndex = null;        }    }}function swapTiles(idx1, idx2) {            const temp = tiles[idx1];    tiles[idx1] = tiles[idx2];    tiles[idx2] = temp;                playSound('swap');    renderBoard();    }function validatePuzzle() {    if (!isGameActive) return;    let isWin = true;    const board = document.getElementById('puzzle-board');    const visualTiles = board.children;                 for (let i = 0; i < tiles.length; i++) {        if (tiles[i].correctPos !== i) {            isWin = false;                        visualTiles[i].classList.add('wrong');        }    }    if (isWin) {        endGame(true);    } else {        playSound('error');                setTimeout(() => {            Array.from(visualTiles).forEach(el => el.classList.remove('wrong'));        }, 1000);    }}function startTimer() {    clearInterval(timerInterval);    timeLeft = 60;    updateTimerDisplay();    timerInterval = setInterval(() => {        timeLeft--;        updateTimerDisplay();        if (timeLeft <= 0) {            endGame(false);        }    }, 1000);}function stopTimer() {    clearInterval(timerInterval);}function updateTimerDisplay() {    const el = document.getElementById('timer');    el.textContent = timeLeft;    el.style.color = timeLeft < 10 ? '#e74c3c' : '#2d3436';}function endGame(success) {    isGameActive = false;    stopTimer();    const modal = document.getElementById('result-modal');    const title = document.getElementById('result-title');    const msg = document.getElementById('result-message');    const icon = document.getElementById('result-icon');    modal.classList.add('active');    if (success) {        title.textContent = "Ø£Ø­Ø³Ù€Ù†Øª! ðŸŽ‰";        msg.textContent = "Ù„Ù‚Ø¯ Ø±ØªØ¨Øª Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­! Ø£Ù†Øª Ø°ÙƒÙŠ Ø¬Ø¯Ø§Ù‹.";        icon.textContent = "ðŸ†";        playSound('win');    } else {        title.textContent = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª â°";        msg.textContent = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! Ø£Ù†Øª Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ø§Ù‹.";        icon.textContent = "ðŸ’ª";        playSound('error');    }}function playSound(type) {    if (!audioCtx) return;    if (audioCtx.state === 'suspended') audioCtx.resume();    const osc = audioCtx.createOscillator();    const gain = audioCtx.createGain();    osc.connect(gain);    gain.connect(audioCtx.destination);    if (type === 'click') {        osc.frequency.setValueAtTime(400, audioCtx.currentTime);        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);        osc.start();        osc.stop(audioCtx.currentTime + 0.05);    } else if (type === 'swap') {        osc.frequency.setValueAtTime(600, audioCtx.currentTime);        osc.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 0.1);        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);        osc.start();        osc.stop(audioCtx.currentTime + 0.1);    } else if (type === 'win') {                [523.25, 659.25, 783.99, 1046.50].forEach((f, i) => {            const o = audioCtx.createOscillator();            const g = audioCtx.createGain();            o.connect(g);            g.connect(audioCtx.destination);            o.frequency.value = f;            g.gain.value = 0.1;            o.start(audioCtx.currentTime + i * 0.1);            o.stop(audioCtx.currentTime + i * 0.1 + 0.3);        });    } else if (type === 'error') {        osc.type = 'sawtooth';        osc.frequency.setValueAtTime(150, audioCtx.currentTime);        osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);        gain.gain.setValueAtTime(0.2, audioCtx.currentTime);        osc.start();        osc.stop(audioCtx.currentTime + 0.3);    }}document.body.addEventListener('click', () => {    if (audioCtx.state === 'suspended') audioCtx.resume();}, { once: true });document.body.addEventListener('touchstart', () => {    if (audioCtx.state === 'suspended') audioCtx.resume();}, { once: true });init();